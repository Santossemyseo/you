<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan de Automatizaci√≥n de Video y Contenido Multimedia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Visualization & Content Choices:
    - Report Info: Plan General del Sistema -> Goal: Proveer visi√≥n general -> Viz/Presentation: Secciones tem√°ticas con texto colapsable, diagrama basado en HTML/CSS para la arquitectura. Interaction: Men√∫ de navegaci√≥n, click-to-expand. Justification: Desglosa un plan complejo en partes manejables. Method: HTML, Tailwind, Vanilla JS.
    - Report Info: Lista de Herramientas (Secci√≥n 5 del informe consolidado) -> Goal: Detallar herramientas disponibles -> Viz/Presentation: Tabla/cuadr√≠cula interactiva. Interaction: Filtros por categor√≠a, hover/click para detalles (mostrados en √°rea de contenido principal o modal). Justification: F√°cil comparaci√≥n y exploraci√≥n enfocada de herramientas. Method: HTML, Tailwind, JS.
    - Report Info: Resoluciones de Salida (Secci√≥n 4 del informe consolidado) -> Goal: Mostrar variedad de formatos de salida -> Viz/Presentation: Gr√°fico de Barras. Interaction: Tooltips. Justification: Representaci√≥n visual de formatos de salida. Library: Chart.js.
    - Report Info: YAML de n8n, YAML de Docker Compose (Secciones 10.2, 6 del informe consolidado) -> Goal: Mostrar ejemplos de configuraci√≥n -> Viz/Presentation: Bloques de c√≥digo preformateados. Interaction: Ninguna (visualizaci√≥n est√°tica). Justification: Presentaci√≥n clara del c√≥digo. Method: HTML `<pre><code>`.
    - Report Info: Diagrama de Arquitectura (Mermaid en fuente original) -> Goal: Visualizar componentes y flujo del sistema -> Viz/Presentation: Recreaci√≥n del diagrama con HTML/CSS/Tailwind. Interaction: Posibles efectos hover en componentes para descripciones breves. Justification: Comprensi√≥n visual de la estructura del sistema sin usar MermaidJS (no permitido). Method: HTML, Tailwind.
    - Report Info: Puntos de Validaci√≥n (ej. API Invidious, l√≠mites API TikTok) -> Goal: Resaltar consideraciones cr√≠ticas -> Viz/Presentation: Marcadores visuales distintivos (iconos, color de fondo) en secciones relevantes (ej. Herramientas, Consideraciones). Interaction: Tooltips explicando la validaci√≥n. Justification: Atrae la atenci√≥n del usuario a advertencias importantes. Method: HTML, Tailwind, JS para tooltips.
    CONFIRMING NO SVG/Mermaid. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        .nav-link { transition: background-color 0.3s, color 0.3s; }
        .nav-link.active { background-color: #d97706; color: #fff; }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .code-block { background-color: #282c34; color: #abb2bf; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; font-family: 'Courier New', Courier, monospace; font-size: 0.875rem; }
        .tool-card { border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1rem; margin-bottom: 1rem; background-color: #fff; }
        .tool-card h3 { color: #b45309; }
        .validation-required { background-color: #fef2f2; border-left: 4px solid #ef4444; padding: 0.5rem; margin-top: 0.5rem; }
        .validation-required strong { color: #b91c1c; }
        .diagram-container { border: 1px solid #d4d4d8; padding: 1rem; border-radius: 0.5rem; background: #fafafa; }
        .diagram-box { background-color: #fff; border: 1px solid #a3a3a3; padding: 0.5rem 1rem; border-radius: 0.25rem; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin: 0.5rem; }
        .diagram-group { border: 2px dashed #fbbf24; padding: 1rem; margin-top:1rem; border-radius: 0.5rem; }
        .diagram-arrow { display: flex; align-items: center; justify-content: center; margin: 0 0.25rem; color: #78716c; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        .collapsible-header { cursor: pointer; }
        .collapsible-content { display: none; }
        .collapsible-content.open { display: block; }
    </style>
</head>
<body class="bg-amber-50 text-neutral-800">
    <header class="bg-neutral-800 text-amber-50 p-4 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold">Plan de Automatizaci√≥n de Video</h1>
            <span class="text-2xl">üé¨</span>
        </div>
    </header>

    <nav class="bg-neutral-700 text-amber-100 shadow-md sticky top-[68px] md:top-[72px] z-40">
        <div class="container mx-auto px-4">
            <ul class="flex flex-wrap justify-center md:justify-start space-x-2 sm:space-x-3 md:space-x-4 py-2 text-sm sm:text-base">
                <li><a href="#vision-general" class="nav-link active px-3 py-2 rounded-md hover:bg-amber-600 hover:text-white block">Visi√≥n General</a></li>
                <li><a href="#arquitectura" class="nav-link px-3 py-2 rounded-md hover:bg-amber-600 hover:text-white block">Arquitectura</a></li>
                <li><a href="#herramientas" class="nav-link px-3 py-2 rounded-md hover:bg-amber-600 hover:text-white block">Herramientas</a></li>
                <li><a href="#flujo-trabajo" class="nav-link px-3 py-2 rounded-md hover:bg-amber-600 hover:text-white block">Flujo de Trabajo</a></li>
                <li><a href="#configuracion" class="nav-link px-3 py-2 rounded-md hover:bg-amber-600 hover:text-white block">Configuraci√≥n</a></li>
                <li><a href="#consideraciones" class="nav-link px-3 py-2 rounded-md hover:bg-amber-600 hover:text-white block">Consideraciones</a></li>
                <li><a href="#monitoreo" class="nav-link px-3 py-2 rounded-md hover:bg-amber-600 hover:text-white block">Monitoreo</a></li>
            </ul>
        </div>
    </nav>

    <main class="container mx-auto p-4 md:p-6 lg:p-8">
        <section id="vision-general" class="content-section active">
            <h2 class="text-2xl sm:text-3xl font-semibold text-amber-700 mb-4">Visi√≥n General y Objetivos</h2>
            <p class="mb-6 text-neutral-700 leading-relaxed">
                Esta secci√≥n introduce el prop√≥sito fundamental del sistema de automatizaci√≥n de video. El objetivo es dise√±ar un sistema robusto, gratuito y completamente local que permita la edici√≥n y generaci√≥n de videos de manera automatizada. Exploraremos las capacidades clave, desde la manipulaci√≥n b√°sica de videos hasta la generaci√≥n de contenido mediante IA y la publicaci√≥n en diversas plataformas sociales, todo orquestado mediante n8n.
            </p>
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="text-xl font-semibold text-amber-600 mb-3">üéØ Objetivo Principal</h3>
                <p class="mb-4 text-neutral-600">Dise√±ar un sistema que, mediante comandos y/o flujos visuales en n8n, permita:</p>
                <ul class="list-disc list-inside space-y-2 text-neutral-600 mb-4">
                    <li>Unir y recortar videos.</li>
                    <li>Insertar transiciones, textos, im√°genes y audios.</li>
                    <li>Ajustar resoluci√≥n y tama√±o para distintas redes.</li>
                    <li>Generar videos (ASMR, animaciones, explicativos) a partir de prompts de texto.</li>
                    <li>Automatizar desde la b√∫squeda hasta la publicaci√≥n en YouTube, Shorts, Facebook, TikTok, Instagram, etc.</li>
                </ul>
                <h3 class="text-xl font-semibold text-amber-600 mb-3">üèóÔ∏è Pilares del Pipeline</h3>
                <ol class="list-decimal list-inside space-y-2 text-neutral-600">
                    <li><strong>Adquisici√≥n:</strong> Descarga autom√°tica desde fuentes p√∫blicas.</li>
                    <li><strong>Procesamiento y Edici√≥n:</strong> Transformaci√≥n, mejora y conversi√≥n de formatos, a√±adiendo valor significativo.</li>
                    <li><strong>Mejora con IA:</strong> Utilizaci√≥n de herramientas de IA para transcripci√≥n, generaci√≥n de voz, y an√°lisis.</li>
                    <li><strong>Orquestaci√≥n:</strong> Flujos de trabajo programados y basados en eventos utilizando n8n.</li>
                    <li><strong>Publicaci√≥n:</strong> Subida a plataformas sociales con metadatos optimizados.</li>
                    <li><strong>Almacenamiento y Versionado:</strong> Gesti√≥n eficiente de archivos, metadatos y c√≥digo.</li>
                    <li><strong>Supervisi√≥n y Alertas:</strong> Logs, m√©tricas y notificaciones para asegurar la robustez del sistema.</li>
                    <li><strong>CI/CD y Despliegue:</strong> Integraci√≥n y despliegue continuos para agilizar el desarrollo y mantenimiento.</li>
                    <li><strong>Documentaci√≥n:</strong> Documentaci√≥n clara y completa del sistema.</li>
                </ol>
            </div>
        </section>

        <section id="arquitectura" class="content-section">
            <h2 class="text-2xl sm:text-3xl font-semibold text-amber-700 mb-4">Arquitectura del Sistema</h2>
            <p class="mb-6 text-neutral-700 leading-relaxed">
                Aqu√≠ se detalla la estructura de alto nivel del sistema de automatizaci√≥n. Presentamos un diagrama que ilustra los componentes principales y sus interacciones, seguido de una descripci√≥n de las entradas y salidas t√≠picas del sistema, incluyendo un vistazo a los formatos de video para diferentes plataformas.
            </p>
            
            <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                <h3 class="text-xl font-semibold text-amber-600 mb-3 collapsible-header">üèõÔ∏è Diagrama de Alto Nivel (Recreaci√≥n HTML/CSS) <span class="text-sm text-neutral-500">(Haz clic para expandir/colapsar)</span></h3>
                <div class="diagram-container collapsible-content mt-4">
                    <p class="text-sm text-neutral-600 mb-4">Este diagrama representa el flujo general del sistema, desde las fuentes externas hasta la publicaci√≥n, pasando por los m√≥dulos locales de procesamiento y orquestaci√≥n.</p>
                    
                    <div class="diagram-group">
                        <p class="font-semibold text-center text-amber-700">Fuentes Externas</p>
                        <div class="flex flex-wrap justify-center">
                            <div class="diagram-box">YouTube</div>
                            <div class="diagram-box">TikTok</div>
                            <div class="diagram-box">Instagram</div>
                            <div class="diagram-box">Otras Fuentes</div>
                        </div>
                    </div>
                    <div class="text-center text-3xl my-2">‚¨áÔ∏è</div>
                    <div class="diagram-group">
                        <p class="font-semibold text-center text-amber-700">Sistema Local Automatizado (Dockerizado)</p>
                        <div class="diagram-box mx-auto w-1/2 sm:w-1/3">n8n (Orquestador)</div>
                        <div class="flex justify-center items-center my-2">
                            <div class="diagram-arrow">‚ÜôÔ∏è</div> <div class="diagram-arrow">‚¨áÔ∏è</div> <div class="diagram-arrow">‚ÜòÔ∏è</div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="diagram-group">
                                <p class="font-semibold text-center text-sm">Adquisici√≥n</p>
                                <div class="diagram-box">Descarga (yt-dlp, Scripts)</div>
                            </div>
                            <div class="diagram-group">
                                <p class="font-semibold text-center text-sm">Procesamiento y Edici√≥n</p>
                                <div class="diagram-box">FFmpeg</div>
                                <div class="diagram-box">MoviePy</div>
                                <div class="diagram-box">Manim</div>
                                <div class="diagram-box">Audio Tools</div>
                            </div>
                            <div class="diagram-group">
                                <p class="font-semibold text-center text-sm">Mejora con IA</p>
                                <div class="diagram-box">WhisperX</div>
                                <div class="diagram-box">TTS (gTTS, etc.)</div>
                                <div class="diagram-box">Stable Diffusion</div>
                            </div>
                        </div>
                        <div class="flex justify-center items-center my-2">
                             <div class="diagram-arrow">‚ÜñÔ∏è</div> <div class="diagram-arrow">‚¨ÜÔ∏è</div> <div class="diagram-arrow">‚ÜóÔ∏è</div>
                        </div>
                         <div class="diagram-box mx-auto w-1/2 sm:w-1/3">Almacenamiento Local (Archivos Crudos, Procesados)</div>
                         <div class="text-center text-3xl my-2">‚¨áÔ∏è</div>
                         <div class="diagram-group">
                            <p class="font-semibold text-center text-sm">Publicaci√≥n</p>
                            <div class="diagram-box">Scripts Python (APIs Sociales)</div>
                        </div>
                    </div>
                     <div class="text-center text-3xl my-2">‚¨áÔ∏è</div>
                     <div class="diagram-group">
                        <p class="font-semibold text-center text-amber-700">Plataformas de Destino</p>
                        <div class="flex flex-wrap justify-center">
                            <div class="diagram-box">YouTube</div>
                            <div class="diagram-box">TikTok</div>
                            <div class="diagram-box">Instagram</div>
                            <div class="diagram-box">Facebook</div>
                        </div>
                    </div>
                    <div class="mt-4 diagram-group">
                        <p class="font-semibold text-center text-amber-700">Infraestructura de Soporte</p>
                        <div class="flex flex-wrap justify-around">
                            <div class="diagram-box">Docker Host</div>
                            <div class="diagram-box">GitHub (CI/CD)</div>
                            <div class="diagram-box">Monitoreo</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-amber-600 mb-3">üì• Entradas del Sistema</h3>
                    <ul class="space-y-2 text-neutral-600">
                        <li><strong>Videos:</strong> MOV, MPEG, MP4, MPG, AVI, WMV, FLV, 3GPP, WebM, DNxHR, ProRes, CineForm, HEVC (h265)</li>
                        <li><strong>Im√°genes:</strong> JPEG, PNG, WEBP, TIFF</li>
                        <li><strong>Audio:</strong> WAV, MP3, AAC</li>
                        <li><strong>Textos & Prompts:</strong> Archivos .txt, JSON, variables de flujo.</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-amber-600 mb-3">üì§ Salidas del Sistema</h3>
                    <ul class="space-y-2 text-neutral-600 mb-4">
                        <li><strong>YouTube / Facebook:</strong> 16:9 (Full HD / 4K)</li>
                        <li><strong>YouTube Shorts / TikTok / Instagram Reels:</strong> 9:16 (1080√ó1920)</li>
                        <li><strong>Facebook & Instagram Feed:</strong> 1:1 (1080√ó1080)</li>
                        <li><strong>Archivos intermedios:</strong> Clips, audios, capturas, subt√≠tulos (.srt).</li>
                    </ul>
                    <div class="chart-container">
                        <canvas id="outputFormatsChart"></canvas>
                    </div>
                     <p class="text-xs text-center text-neutral-500 mt-2">Gr√°fico ilustrativo de anchos de resoluci√≥n comunes.</p>
                </div>
            </div>
        </section>

        <section id="herramientas" class="content-section">
            <h2 class="text-2xl sm:text-3xl font-semibold text-amber-700 mb-4">Componentes y Herramientas</h2>
            <p class="mb-6 text-neutral-700 leading-relaxed">
                Esta secci√≥n detalla las herramientas y tecnolog√≠as recomendadas para cada tarea dentro del pipeline de automatizaci√≥n. Puedes filtrar las herramientas por categor√≠a para una exploraci√≥n m√°s enfocada. Se incluyen notas importantes y puntos que requieren validaci√≥n sobre el uso de ciertas APIs o servicios.
            </p>
            <div class="mb-6 flex flex-wrap gap-2" id="tool-filters">
                <button data-category="all" class="tool-filter-btn active bg-amber-600 text-white px-4 py-2 rounded-md text-sm">Todas</button>
                <button data-category="Descarga de Contenido" class="tool-filter-btn bg-amber-200 text-amber-800 px-4 py-2 rounded-md text-sm hover:bg-amber-300">Descarga</button>
                <button data-category="Transcodificaci√≥n & Filtros" class="tool-filter-btn bg-amber-200 text-amber-800 px-4 py-2 rounded-md text-sm hover:bg-amber-300">Transcodificaci√≥n</button>
                <button data-category="Scripting de Edici√≥n" class="tool-filter-btn bg-amber-200 text-amber-800 px-4 py-2 rounded-md text-sm hover:bg-amber-300">Scripting Edici√≥n</button>
                <button data-category="Mejora con IA" class="tool-filter-btn bg-amber-200 text-amber-800 px-4 py-2 rounded-md text-sm hover:bg-amber-300">Mejora IA</button>
                <button data-category="Orquestaci√≥n de Flujos" class="tool-filter-btn bg-amber-200 text-amber-800 px-4 py-2 rounded-md text-sm hover:bg-amber-300">Orquestaci√≥n</button>
                <button data-category="Publicaci√≥n (APIs)" class="tool-filter-btn bg-amber-200 text-amber-800 px-4 py-2 rounded-md text-sm hover:bg-amber-300">Publicaci√≥n</button>
                <button data-category="Monitoreo y Alertas" class="tool-filter-btn bg-amber-200 text-amber-800 px-4 py-2 rounded-md text-sm hover:bg-amber-300">Monitoreo</button>
            </div>
            <div id="tools-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            </div>
        </section>

        <section id="flujo-trabajo" class="content-section">
            <h2 class="text-2xl sm:text-3xl font-semibold text-amber-700 mb-4">Flujo de Trabajo con n8n</h2>
            <p class="mb-6 text-neutral-700 leading-relaxed">
                n8n es el coraz√≥n de la orquestaci√≥n en este sistema. Aqu√≠ se presenta un ejemplo conceptual de un flujo de trabajo en n8n (representado en YAML) que ilustra c√≥mo se podr√≠an conectar los diferentes pasos del pipeline, desde la activaci√≥n programada hasta la publicaci√≥n. Tambi√©n se incluyen mejores pr√°cticas para dise√±ar flujos robustos y mantenibles en n8n.
            </p>
            <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                <h3 class="text-xl font-semibold text-amber-600 mb-3 collapsible-header">üìú Ejemplo de Flujo n8n (YAML Conceptual) <span class="text-sm text-neutral-500">(Haz clic para expandir/colapsar)</span></h3>
                <div class="code-block collapsible-content">
<pre>
nodes:
  - id: trigger_schedule
    type: n8n-nodes-base.scheduleTrigger
    typeVersion: 1
    parameters:
      rule: '0 8 * * *' # Ejecuci√≥n diaria a las 8 AM
    name: "Daily Video Pipeline Trigger"

  - id: set_keywords
    type: n8n-nodes-base.set
    typeVersion: 1
    parameters:
      values:
        string:
          - name: "searchKeywords"
            value: "['ASMR relajaci√≥n', 'noticias tech', 'tutorial cocina']"
          - name: "videoSourcePath"
            value: "/data/raw/"
    name: "Define Variables de Flujo"

  - id: download_videos_node
    type: n8n-nodes-base.executeCommand
    typeVersion: 1
    parameters:
      command: |
        python /scripts/download_videos.py \
          --keywords "{{ $json.searchKeywords }}" \
          --output "{{ $json.videoSourcePath }}{{ $now.toFormat('yyyyMMdd') }}/"
    name: "1. Descargar Videos"

  # ... m√°s nodos para edici√≥n, IA, split, etc. ...

  - id: publish_node
    type: n8n-nodes-base.executeCommand
    typeVersion: 1
    parameters:
      command: |
        python /scripts/publish.py \
          --platforms "youtube,tiktok" \
          --main_video "{{ $json.editedPath }}video.mp4" \
          --credentials_file "/secrets/api_creds.json"
    name: "4. Publicar Contenido"

connections:
  trigger_schedule:
    main:
      - - node: set_keywords
  set_keywords:
    main:
      - - node: download_videos_node
  # ... m√°s conexiones ...
  # (Nodo anterior a publish_node):
  #   main:
  #     - - node: publish_node
</pre>
                </div>
                 <p class="text-xs text-neutral-500 mt-2">Nota: Este YAML es una representaci√≥n conceptual. La l√≥gica de bucle y el manejo din√°mico de nombres de archivo se configuran en la UI de n8n.</p>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-md">
                 <h3 class="text-xl font-semibold text-amber-600 mb-3 collapsible-header">üí° Mejores Pr√°cticas para n8n <span class="text-sm text-neutral-500">(Haz clic para expandir/colapsar)</span></h3>
                 <div class="collapsible-content space-y-3 text-neutral-600">
                    <p><strong>Modularidad:</strong> Dividir el pipeline en flujos de trabajo m√°s peque√±os y reutilizables.</p>
                    <p><strong>Sub-flujos de Trabajo:</strong> Encapsular l√≥gica compleja y repetitiva.</p>
                    <p><strong>L√≥gica Condicional:</strong> Usar nodos `IF` y `Switch` para enrutamiento din√°mico.</p>
                    <p><strong>Manejo de Errores Robusto:</strong> Utilizar "Error Trigger" y ramas de flujo para errores.</p>
                    <p><strong>Nodos `Wait`:</strong> Para respetar l√≠mites de tasa de APIs externas.</p>
                    <p><strong>Control de Versiones:</strong> Exportar flujos como JSON y almacenarlos en Git.</p>
                </div>
            </div>
        </section>

        <section id="configuracion" class="content-section">
            <h2 class="text-2xl sm:text-3xl font-semibold text-amber-700 mb-4">Configuraci√≥n y Despliegue</h2>
            <p class="mb-6 text-neutral-700 leading-relaxed">
                Esta secci√≥n cubre los aspectos pr√°cticos de la puesta en marcha del sistema. Incluye los requerimientos del sistema, un ejemplo de configuraci√≥n local utilizando Docker Compose, los pasos iniciales para la implementaci√≥n, y una visi√≥n general de c√≥mo se puede integrar un flujo de CI/CD con GitHub Actions.
            </p>
            <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                <h3 class="text-xl font-semibold text-amber-600 mb-3 collapsible-header">‚öôÔ∏è Requerimientos del Sistema <span class="text-sm text-neutral-500">(Haz clic para expandir/colapsar)</span></h3>
                <ul class="list-disc list-inside space-y-2 text-neutral-600 collapsible-content">
                    <li><strong>Completamente Local:</strong> Procesamiento sin costos recurrentes de nube (salvo opcionales).</li>
                    <li><strong>Modularidad:</strong> Pasos encapsulados en contenedores Docker, coordinados por n8n.</li>
                    <li><strong>Acceso CLI y API Local:</strong> Scripts ejecutables por l√≠nea de comandos.</li>
                    <li><strong>Plantillas de Resoluci√≥n:</strong> Preconfiguraciones para formatos 16:9, 9:16, 1:1.</li>
                    <li><strong>Flujo n8n Detallado:</strong> Nodos para descarga, generaci√≥n, edici√≥n, split y publicaci√≥n.</li>
                    <li><strong>Monitorizaci√≥n y Logging:</strong> Registro de logs y m√©tricas b√°sicas.</li>
                </ul>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                <h3 class="text-xl font-semibold text-amber-600 mb-3 collapsible-header">üê≥ Configuraci√≥n Local con Docker Compose (Ejemplo) <span class="text-sm text-neutral-500">(Haz clic para expandir/colapsar)</span></h3>
                <div class="code-block collapsible-content">
<pre>
version: '3.8'
services:
  n8n:
    image: n8nio/n8n
    restart: always
    ports:
      - "5678:5678"
    environment:
      - GENERIC_TIMEZONE=America/Bogota
    volumes:
      - ./n8n_data:/home/node/.n8n
      - ./workflow_scripts:/scripts
      - ./video_data:/data
    # FFmpeg debe estar disponible en la imagen de n8n o en un worker.

  python_worker: # Opcional
    build:
      context: ./python_worker_dir 
    restart: always
    volumes:
      - ./workflow_scripts:/scripts
      - ./video_data:/data

volumes:
  n8n_data:
  video_data:
  workflow_scripts:
</pre>
                </div>
                 <p class="text-xs text-neutral-500 mt-2">Nota: FFmpeg se usar√≠a v√≠a 'docker exec' o, preferiblemente, instalado en el contenedor de n8n/Python.</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                <h3 class="text-xl font-semibold text-amber-600 mb-3 collapsible-header">üöÄ Pasos para Implementaci√≥n Inicial <span class="text-sm text-neutral-500">(Haz clic para expandir/colapsar)</span></h3>
                <ol class="list-decimal list-inside space-y-2 text-neutral-600 collapsible-content">
                    <li>Instalar Docker y Docker Compose.</li>
                    <li>Configurar n8n b√°sico con `docker-compose`.</li>
                    <li>Desarrollar scripts Python modulares (descarga, edici√≥n, IA, publicaci√≥n).</li>
                    <li>Crear Dockerfiles para contenedores Python si es necesario.</li>
                    <li>Dise√±ar y construir flujos en n8n gradualmente.</li>
                    <li>Configurar APIs de plataformas sociales y almacenar credenciales de forma segura.</li>
                    <li>Definir plantillas de edici√≥n y realizar pruebas exhaustivas.</li>
                    <li>Optimizar par√°metros y configurar monitoreo b√°sico.</li>
                    <li>Implementar CI/CD con GitHub Actions.</li>
                </ol>
            </div>
        </section>

        <section id="consideraciones" class="content-section">
            <h2 class="text-2xl sm:text-3xl font-semibold text-amber-700 mb-4">Consideraciones Cr√≠ticas</h2>
            <p class="mb-6 text-neutral-700 leading-relaxed">
                Esta secci√≥n aborda puntos cruciales que deben tenerse en cuenta para el √©xito y la sostenibilidad del sistema. Incluye el cumplimiento de pol√≠ticas de contenido, las particularidades de las APIs de las plataformas de publicaci√≥n, y optimizaciones de rendimiento. Presta especial atenci√≥n a los elementos marcados para validaci√≥n.
            </p>
            <div class="space-y-6">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h4 class="text-lg font-semibold text-amber-600 mb-2">üìú Pol√≠tica de Contenido Reutilizado (Ej. YouTube)</h4>
                    <p class="text-neutral-600">El contenido debe tener una "transformaci√≥n significativa" para ser monetizable. No basta con simples re-codificaciones. Se debe a√±adir valor √∫nico como narraci√≥n, comentario original, edici√≥n creativa o elementos visuales din√°micos.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h4 class="text-lg font-semibold text-amber-600 mb-2">üì° Consideraciones por Plataforma API</h4>
                     <div class="validation-required">
                        <strong>TikTok API:</strong> Contenido publicado por clientes no auditados queda restringido a visibilidad privada. Se requiere auditor√≠a para publicaciones p√∫blicas.
                    </div>
                    <div class="validation-required mt-2">
                        <strong>Vimeo API:</strong> El plan gratuito es muy limitado (1GB total, sin APIs robustas). Se requerir√°n planes de pago para uso significativo.
                    </div>
                     <div class="validation-required mt-2">
                        <strong>Spotify (Podcasts):</strong> La subida se realiza mediante feed RSS desde una plataforma de alojamiento, no directamente con la API Web de Spotify.
                    </div>
                    <p class="text-neutral-600 mt-2">Otras APIs (YouTube, Instagram, Facebook, Twitter, LinkedIn) tienen sus propios requisitos de autenticaci√≥n, cuotas y permisos espec√≠ficos que deben gestionarse cuidadosamente.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h4 class="text-lg font-semibold text-amber-600 mb-2">‚ö° Manejo de L√≠mites de API y Rendimiento</h4>
                    <ul class="list-disc list-inside space-y-1 text-neutral-600">
                        <li>Implementar l√≥gica de reintento con retroceso exponencial.</li>
                        <li>Monitorear encabezados de respuesta de l√≠mites de tasa.</li>
                        <li>Usar nodos "Wait" en n8n para espaciar solicitudes.</li>
                        <li>Optimizar FFmpeg: usar presets, ajustar CRF, paralelizar con threads, considerar aceleraci√≥n por GPU.</li>
                        <li>NAS (SMB/CIFS): Optimizar configuraci√≥n o usar DAS para tareas intensivas.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="monitoreo" class="content-section">
            <h2 class="text-2xl sm:text-3xl font-semibold text-amber-700 mb-4">Monitoreo, Logging y Mantenimiento</h2>
            <p class="mb-6 text-neutral-700 leading-relaxed">
                Para asegurar la fiabilidad y eficiencia del sistema a largo plazo, es fundamental implementar buenas pr√°cticas de monitoreo, logging y mantenimiento. Esta secci√≥n describe las estrategias y herramientas recomendadas para estas tareas, incluyendo la gesti√≥n de errores y la documentaci√≥n del sistema.
            </p>
            <div class="space-y-6">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h4 class="text-lg font-semibold text-amber-600 mb-2">üìù Logging</h4>
                    <ul class="list-disc list-inside space-y-1 text-neutral-600">
                        <li>Utilizar logging estructurado en Python (JSON).</li>
                        <li>Establecer niveles de logging adecuados (DEBUG, INFO, WARNING).</li>
                        <li>Revisar logs de n8n y contenedores Docker.</li>
                        <li>Considerar centralizaci√≥n de logs (SigNoz, Loki, ELK Stack) para sistemas grandes.</li>
                    </ul>
                </div>
                 <div class="bg-white p-6 rounded-lg shadow-md">
                    <h4 class="text-lg font-semibold text-amber-600 mb-2">üìä M√©tricas y Seguimiento de Errores</h4>
                    <p class="text-neutral-600 mb-2">M√©tricas clave: tiempos de procesamiento, videos procesados, tasas de error, uso de recursos.</p>
                    <ul class="list-disc list-inside space-y-1 text-neutral-600">
                        <li>Herramientas: Prometheus y Grafana para m√©tricas y visualizaci√≥n.</li>
                        <li>Sentry para seguimiento de errores.
                            <div class="validation-required text-sm">
                                <strong>Sentry (Nivel Gratuito):</strong> Limitado (1 usuario, 5k errores/mes). Considerar self-hosted o alternativas (SigNoz, Zabbix) si es insuficiente.
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h4 class="text-lg font-semibold text-amber-600 mb-2">üîî Mecanismos de Alerta</h4>
                     <ul class="list-disc list-inside space-y-1 text-neutral-600">
                        <li>Notificaciones de n8n para fallos en flujos.</li>
                        <li>Alertas por correo electr√≥nico (Python `smtplib` o servicios de API).</li>
                        <li>Integraci√≥n con mensajer√≠a (Slack, Discord) v√≠a webhooks.</li>
                        <li>Alertas desde sistemas de monitoreo (Grafana, Sentry).</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h4 class="text-lg font-semibold text-amber-600 mb-2">üìö Documentaci√≥n y Mantenimiento</h4>
                     <ul class="list-disc list-inside space-y-1 text-neutral-600">
                        <li>`README.md` detallado (descripci√≥n, instalaci√≥n, uso, etc.).</li>
                        <li>Comentarios en el c√≥digo (PEP8) y en workflows de n8n (notas).</li>
                        <li>Manual de Operaciones (Runbook) para procedimientos comunes.</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-neutral-800 text-amber-100 text-center p-6 mt-12">
        <p class="text-sm">&copy; <span id="currentYear"></span> Plan de Automatizaci√≥n de Video. SPA Interactiva.</p>
    </footer>

<script>
    const navLinks = document.querySelectorAll('.nav-link');
    const contentSections = document.querySelectorAll('.content-section');
    const toolFilters = document.getElementById('tool-filters');
    const toolsGrid = document.getElementById('tools-grid');
    const collapsibleHeaders = document.querySelectorAll('.collapsible-header');

    const toolsData = [
        { category: "Descarga de Contenido", name: "yt-dlp (Unlicense)", description: "Herramienta principal para descarga desde YouTube y otros sitios. Robusta y con mantenimiento activo." },
        { category: "Descarga de Contenido", name: "QuickMediaDL (MIT)", description: "Biblioteca Python construida sobre yt-dlp, √∫til si se requiere una licencia MIT espec√≠fica." },
        { category: "Descarga de Contenido", name: "pytube (MIT)", description: "Alternativa para descarga de YouTube. Verificar compatibilidad y mantenimiento." },
        { category: "Descarga de Contenido", name: "Invidious API", description: "Se recomienda eliminar. Alternativa no oficial a YouTube con riesgos legales, estabilidad incierta y no para uso comercial.", validation: "Eliminar Invidious API debido a riesgos legales y de estabilidad." },
        { category: "Transcodificaci√≥n & Filtros", name: "FFmpeg (LGPL/GPL)", description: "Procesamiento de video/audio por l√≠nea de comandos. Esencial para casi todas las tareas de manipulaci√≥n." },
        { category: "Scripting de Edici√≥n", name: "MoviePy (MIT)", description: "Biblioteca Python para edici√≥n program√°tica de video: unir, recortar, a√±adir texto/overlays, transiciones." },
        { category: "Mejora con IA", name: "Manim (MIT)", description: "Generaci√≥n de animaciones matem√°ticas y de texto en video, ideal para contenido educativo. (Categorizado como Mejora con IA por su naturaleza generativa avanzada)" },
        { category: "Mejora con IA", name: "Stable Diffusion + Deforum (CreativeML Open RAIL-M)", description: "Pipeline local de texto a video. Requiere hardware considerable (GPU)." },
        { category: "Mejora con IA", name: "gTTS (Google Text-to-Speech) (MIT)", description: "Interfaz Python para la API de Google Translate TTS. F√°cil de usar para voces est√°ndar." },
        { category: "Mejora con IA", name: "pyttsx3 (BSD)", description: "Biblioteca TTS offline y multiplataforma. Voces m√°s rob√≥ticas pero 100% local." },
        { category: "Mejora con IA", name: "Tortoise-TTS (Apache 2.0)", description: "Modelo de TTS avanzado para generar voces naturales y clonaci√≥n de voz. Requiere GPU." },
        { category: "Mejora con IA", name: "OpenAI Whisper / whisperX (MIT)", description: "Modelos para transcripci√≥n de audio a texto de alta precisi√≥n. whisperX ofrece mejor alineaci√≥n y diarizaci√≥n." },
        { category: "Mejora con IA", name: "OpenCV (Apache 2.0)", description: "Biblioteca para visi√≥n por computadora, √∫til para detecci√≥n de escenas, objetos, etc." },
        { category: "Procesamiento de Audio", name: "pydub (MIT)", description: "Manipulaci√≥n de audio sencilla con Python." },
        { category: "Procesamiento de Audio", name: "librosa (ISC)", description: "An√°lisis de audio avanzado." },
        { category: "Procesamiento de Audio", name: "Spleeter (MIT)", description: "Separaci√≥n de fuentes de audio." },
        { category: "Orquestaci√≥n de Flujos", name: "n8n (Fair-Code / Self-hosted: Apache 2.0 con ELv2)", description: "Plataforma visual para automatizaci√≥n de flujos de trabajo. Se ejecutar√° localmente v√≠a Docker." },
        { category: "Contenerizaci√≥n", name: "Docker (Apache 2.0)", description: "Para crear, desplegar y ejecutar aplicaciones en contenedores." },
        { category: "Contenerizaci√≥n", name: "Docker Compose (Apache 2.0)", description: "Herramienta para definir y ejecutar aplicaciones Docker multi-contenedor." },
        { category: "Almacenamiento Local", name: "Vol√∫menes Docker, NAS (SMB/CIFS)", description: "Para archivos. Nota sobre NAS: Considerar cuellos de botella de rendimiento, optimizar SMB." },
        { category: "Almacenamiento Cloud (Opcional)", name: "Google Cloud Storage, AWS S3, Azure Blob Storage", description: "Para backups o archivo a largo plazo. Considerar pol√≠ticas de ciclo de vida." },
        { category: "CI/CD", name: "GitHub Actions", description: "Automatizaci√≥n de pruebas, construcci√≥n de im√°genes Docker y despliegue." },
        { category: "Publicaci√≥n (APIs)", name: "APIs de YouTube, TikTok, Instagram, Twitter, Facebook, Vimeo, LinkedIn", description: "Utilizar las APIs oficiales. Verificar limitaciones de cada API.", validationPoints: [
            { platform: "TikTok", note: "Contenido por clientes no auditados es privado. Requiere auditor√≠a para p√∫blico." },
            { platform: "Vimeo", note: "Plan gratuito muy limitado. Requiere planes de pago para uso significativo." },
            { platform: "Spotify (Podcasts)", note: "Subida v√≠a feed RSS desde plataforma de alojamiento, no API Web directa." }
        ]},
        { category: "Monitoreo y Alertas", name: "Prometheus (Apache 2.0)", description: "Recolecci√≥n de m√©tricas." },
        { category: "Monitoreo y Alertas", name: "Grafana (Apache 2.0)", description: "Visualizaci√≥n de m√©tricas y logs." },
        { category: "Monitoreo y Alertas", name: "Sentry (Gratuito limitado / Self-hosted BSD)", description: "Seguimiento de errores.", validation: "Nivel gratuito limitado (1 usuario, 5k errores/mes). Considerar alternativas." },
        { category: "Monitoreo y Alertas", name: "SigNoz, Grafana Loki, Zabbix", description: "Alternativas/complementos a Sentry para monitoreo m√°s completo." }
    ];

    function displayTools(filterCategory = 'all') {
        toolsGrid.innerHTML = '';
        const filteredTools = filterCategory === 'all' ? toolsData : toolsData.filter(tool => tool.category === filterCategory);

        if (filteredTools.length === 0) {
            toolsGrid.innerHTML = `<p class="text-neutral-600 col-span-full text-center">No hay herramientas en esta categor√≠a.</p>`;
            return;
        }
        
        filteredTools.forEach(tool => {
            const toolElement = document.createElement('div');
            toolElement.className = 'tool-card transform hover:scale-105 transition-transform duration-300 ease-in-out';
            let validationHTML = '';
            if (tool.validation) {
                validationHTML = `<div class="validation-required text-sm"><strong>‚ö†Ô∏è Requiere Validaci√≥n:</strong> ${tool.validation}</div>`;
            }
            if (tool.validationPoints) {
                tool.validationPoints.forEach(vp => {
                     validationHTML += `<div class="validation-required text-sm mt-1"><strong>‚ö†Ô∏è ${vp.platform}:</strong> ${vp.note}</div>`;
                });
            }
            toolElement.innerHTML = `
                <h3 class="text-lg font-semibold mb-1">${tool.name}</h3>
                <p class="text-xs text-neutral-500 mb-2">Categor√≠a: ${tool.category}</p>
                <p class="text-sm text-neutral-600">${tool.description}</p>
                ${validationHTML}
            `;
            toolsGrid.appendChild(toolElement);
        });
    }

    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = link.getAttribute('href').substring(1);

            navLinks.forEach(navLink => navLink.classList.remove('active'));
            link.classList.add('active');

            contentSections.forEach(section => {
                if (section.id === targetId) {
                    section.classList.add('active');
                } else {
                    section.classList.remove('active');
                }
            });
            window.scrollTo({ top: 0, behavior: 'smooth' }); 
        });
    });
    
    if (toolFilters) {
        toolFilters.addEventListener('click', (e) => {
            if (e.target.classList.contains('tool-filter-btn')) {
                document.querySelectorAll('.tool-filter-btn').forEach(btn => btn.classList.remove('bg-amber-600', 'text-white'));
                document.querySelectorAll('.tool-filter-btn').forEach(btn => btn.classList.add('bg-amber-200', 'text-amber-800'));
                e.target.classList.add('bg-amber-600', 'text-white');
                e.target.classList.remove('bg-amber-200', 'text-amber-800');
                const category = e.target.dataset.category;
                displayTools(category);
            }
        });
    }

    collapsibleHeaders.forEach(header => {
        header.addEventListener('click', () => {
            const content = header.nextElementSibling;
            if (content.classList.contains('collapsible-content')) {
                content.classList.toggle('open');
                 header.querySelector('span').textContent = content.classList.contains('open') ? '(Haz clic para colapsar)' : '(Haz clic para expandir)';
            }
        });
    });
    
    document.getElementById('currentYear').textContent = new Date().getFullYear();

    function initChart() {
        const ctx = document.getElementById('outputFormatsChart')?.getContext('2d');
        if (!ctx) return;

        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['YouTube/FB (16:9)', 'Shorts/Reels (9:16)', 'Feed Cuadrado (1:1)'],
                datasets: [{
                    label: 'Ancho de Resoluci√≥n Com√∫n (px)',
                    data: [1920, 1080, 1080],
                    backgroundColor: [
                        'rgba(217, 119, 6, 0.6)', // amber-600
                        'rgba(245, 158, 11, 0.6)', // amber-500
                        'rgba(251, 191, 36, 0.6)'  // amber-400
                    ],
                    borderColor: [
                        'rgba(217, 119, 6, 1)',
                        'rgba(245, 158, 11, 1)',
                        'rgba(251, 191, 36, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Ancho (px)' }
                    },
                    x: {
                        title: { display: true, text: 'Formato de Plataforma' }
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) { label += ': '; }
                                if (context.parsed.y !== null) {
                                    label += context.parsed.y + 'px de ancho';
                                }
                                return label;
                            }
                        }
                    }
                },
                animation: {
                    duration: 1000,
                    easing: 'easeInOutQuart'
                }
            }
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        displayTools();
        initChart();
        if (contentSections.length > 0) contentSections[0].classList.add('active');
        if (navLinks.length > 0) navLinks[0].classList.add('active');

        // Open first collapsible in each section if any
        document.querySelectorAll('.content-section').forEach(section => {
            const firstCollapsible = section.querySelector('.collapsible-content');
            const firstHeader = section.querySelector('.collapsible-header');
            if (firstCollapsible && firstHeader) {
                firstCollapsible.classList.add('open');
                const span = firstHeader.querySelector('span');
                if (span) span.textContent = '(Haz clic para colapsar)';
            }
        });
    });

</script>
</body>
</html>